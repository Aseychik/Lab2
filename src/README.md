## Отчет по лабораторной работе № 2

#### № группы: `ПМ-2401`

#### Выполнил: `Асеев Егор Артурович`

#### Вариант: `2`

### Cодержание:

- [Постановка задачи](#1-постановка-задачи)
- [Входные и выходные данные](#2-входные-и-выходные-данные)
- [Выбор структуры данных](#3-выбор-структуры-данных)
- [Алгоритм](#4-алгоритм)
- [Программа](#5-программа)
- [Анализ правильности решения](#6-анализ-правильности-решения)

### 1. Постановка задачи

>1. Программа считывает с консоли размеры массива N и M, затем элементы
>массива размером N × M.
>2. Переставляет столбцы массива в порядке убывания максимальных
>элементов каждого столбца. Если максимальные элементы равны,
>то сравнивает по минимальному элементу. Если минимальные элементы также равны, сортирует столбцы по возрастанию суммы
>квадратов элементов столбца.
>3. Находит и выводит минимальное значение среди сумм элементов
>каждой строки, а также номер строки, в которой эта сумма была
>найдена.
>4. Выводит элементы массива в виде треугольника, где первая строка
>содержит один элемент, вторая — три, третья — пять и так далее.
>Реализовать алгоритм с помощью одного цикла.
>5. Вычисляет и выводит разницу между максимальной и минимальной суммой строк, среднее арифметическое всех сумм строк, а также стандартное отклонение сумм строк.


Данную задачу можно разделить на 2 подзадачи: нахождение максимального числа и получение модуля этого числа.

- Сначала нужно считать массив целых чисел N x M
- Потом нужно отсортировать столбцы этого массива в порядке убывания максимальных элементов каждого столбца, 
если максимальные элементы равны, 
то сравнивать по минимальному, 
если минимальные элементы тоже равны, сортирует столбцы по возрастанию суммы элементов столбца
- Записываем в отдельный массив суммы элементов каждой строки, отслеживая при этом минимальную и максимальную сумму элементов в строке, а также номер строки, в которой была минимальная сумма элементов
- Вывод минимальной суммы элементов строки и номера этой строки
- Вывод всех элементов массива в виде треугольника, в котором в первом слое один элемент и на каждом слое на два элемента больше, чем на предыдущем
- Вывод разницы между минимальной и максимальной суммой элементов в строке, среднего арифметического всех сумм строк
- Подсчёт и вывод стандартного отклонения сумм строк

### 2. Входные и выходные данные

#### Данные на вход

На вход программа получает размеры массива N и M, они должны быть целыми и положительными.
После этого программа получает все элементы массива. Элементы массива являются целыми числами.

|                         | Тип         | min значение    | max значение     |
|-------------------------|-------------|-----------------|------------------|
| N (Число 1)             | Целое число | 1               | 2<sup>31</sup>-1 |
| M (Число 2)             | Целое число | 1               | 2<sup>31</sup>-1 |
| Numbers (Числа массива) | Целое число | -2<sup>31</sup> | 2<sup>31</sup>-1 |


#### Данные на выход

Программа должна вывести минимальную сумму элементов строки от -2<sup>62</sup> до 2<sup>62</sup>, номер этой строки от 1 до 2<sup>31</sup>.
Также программа должна вывести все элементы массива, каждый из которых от -2<sup>31</sup> до 2<sup>31</sup>-1
Разница между максимальной и минимальной суммой строк -2<sup>63</sup> до 2<sup>63</sup>, 
среднее арифметическое всех сумм строк -2<sup>62</sup> до 2<sup>62</sup>, 
а также стандартное отклонение сумм строк -2<sup>31</sup> до 2<sup>31</sup>-1
                                                                                            
|                                                       | Тип                | min значение    | max значение     |
|-------------------------------------------------------|--------------------|-----------------|------------------|
| минимальная сумма элементов строки                    | целое число        | -2<sup>62</sup> | 2<sup>62</sup>   |
| номер этой строки                                     | целое число        | -2<sup>31</sup> | 2<sup>31</sup>-1 |
| элементы массива                                      | целое число        | -2<sup>31</sup> | 2<sup>31</sup>-1 |
| Разница между максимальной и минимальной суммой строк | целое число        | -2<sup>63</sup> | 2<sup>63</sup>   |
| среднее арифметическое всех сумм строк                | вещественное число | -2<sup>62</sup> | 2<sup>62</sup>   |
| стандартное отклонение сумм строк                     | вещественное число | -2<sup>62</sup> | 2<sup>62</sup>   |

### 2.5 Математическая модель
```math
\sqrt{\frac{\sum{(a_i-a_{cp})}}{n-1}}
```

### 3. Выбор структуры данных
                                                                                                                  


|                                                    | название переменной | Тип (в Java) | 
|----------------------------------------------------|---------------------|--------------|
| N                                                  | `n`                 | `int`        |
| M                                                  | `m`                 | `int`        | 
| Array                                              | `arr`               | `int[][]`    |
| min sum                                            | `minst`             | `int[]`      |
| сумма строк                                        | `sumarr`            | `int[]`      |
| max sum                                            | `maxsum`            | `int`        |
| среднее арифм                                      | `average`           | `double`     |
| массив значений для сортировки                     | `sortarr`           | `int[]`      |
| отсортированный массив                             | `nwarr`             | `int[][]`    |
| сдвиг для вывода элементов массива                 | `shift`             | `int`        |
| промежуточное значение для стандартного отклонения | `deviat`            | `double`     |


### 4. Алгоритм

#### Алгоритм выполнения программы:

1. **Ввод данных:**  
   Программа считывает размеры массива, обозначенные как `n` и `m`.

2. **Ввод и обработка элементов массива:**

   Программа считывает по строкам элементы массива `arr`. 
   При этом вычисляется минимальная и максимальная сумма элементов строки,
   добавляются в отдельный массив значения сумм строк.

3. **Создание массива элементов для сравнения во время сортировки:**
   
    Для каждого столбца массива, в соответствующий элемент 
    массива `sortarr` записываются максимальный, минимальный, сумма квадратов элементов и номер столбца.
4. **Сортировка массива:**

   Сортируется массив `sortarr` по заданным условиям.

5. **Восстановление отсортированного изначального массива:**

   По массиву `sortarr` восстанавливается изначальный массив arr, но уже отсортированный.
 
6. **Вывод минимальной суммы элементов строки и её номер:**

   Вывод данных, вычисленных на втором шаге.

7. **Вывод массива в виде треугольника:**

   Используя переменную `shift` через один цикл for выводится массив в виде треугольника.

8. **Вычисление и вывод оставшихся данных:**

   Вычисляется и выводится разность между самой максимальной и минимальной суммой строк, 
   а также среднее арифметическое сумм всех строк.
9. **Стандартное отклонение сумм строк**
   вычисление и вывод стандартного отклонения сумм строк.

### 5. Программа

```java
import java.io.IOException;
import java.io.PrintStream;
import java.util.Scanner;

public class Main {
   // Объявляем объект класса Scanner для ввода данных
   public static Scanner in = new Scanner(System.in);
   // Объявляем объект класса PrintStream для вывода данных
   public static PrintStream out = System.out;

   public static void main(String[] args) {
      // Ввод размеров массива
      int n = in.nextInt(), m = in.nextInt();
      // Если n или m не подходят для размеров массива их нужно ввести снова
      while (n <= 0 || m <= 0){
         out.println("n и m должны быть натуральными числами\nВведите n и m заново: ");
         n = in.nextInt();
         m = in.nextInt();
      }

      // Создание массива целых чисел
      int[][] arr = new int[n][m];
      // Создание массива минимальной суммы элементов строки и её номера
      long[] minst = new long[]{0, 0};
      // Создание массива сумм строк
      long[] sumarr = new long[n];
      // Создание переменной максимальной суммы элементов строки
      long maxsum = 0;
      // Создание переменной для вычисления среднего арифметического всех сумм строк
      double average = 0;

      // Задание элементов массива
      for (int i = 0; i < n; i++) {
         // Переменная для вычисления суммы строки
         long temp = 0;
         for (int j = 0; j < m; j++) {
            // Добавления элемента в массив
            arr[i][j] = in.nextInt();
            // Прибавление значения этого элемента к счётчику суммы строки
            temp += arr[i][j];
         }
         // Прибавление суммы строки к переменной для вычисления среднего арифметического
         average += temp;
         // Добавление в массив сумм суммы элементов новой строчки
         sumarr[i] = temp;
         // Если строчка первая, то задание изначальных значений для минимальной и
         // максимальной суммы элементов строки
         if (i == 0) {
            minst = new long[]{temp, 0};
            maxsum = temp;
         }
         // Иначе сравнение суммы элементов данной строки с прошлой минимальной и максимальной суммой
         else {
            if (temp < minst[0])
               minst = new long[]{temp, i};
            if (temp > maxsum)
               maxsum = temp;
         }
      }

      // Создание массива критериев для сортировки для каждого столбца
      int[][] sortarr = new int[m][4];
      for (int j = 0; j < m; j++) {
         // 0 - максимальный элемент столбца
         sortarr[j][0] = arr[0][j];
         // 1 - минимальный элемент столбца
         sortarr[j][1] = arr[0][j];
         // 2 - сумма квадратов всех элементов столбца
         sortarr[j][2] = arr[0][j] * arr[0][j];
         // 3 - номер столбца в изначальном массиве
         sortarr[j][3] = j;
         // вычисление максимального, минимального элемента столбца и суммы квадратов всех элементов столбца
         for (int i = 1; i < n; i++) {
            // Проход по элементам столбца
            int temp = arr[i][j];
            // Вычисление максимального
            if (temp > sortarr[j][0])
               sortarr[j][0] = temp;
            // Вычисление минимального
            if (temp < sortarr[j][1])
               sortarr[j][1] = temp;
            // Вычисление суммы квадратов всех элементов столбца
            sortarr[j][2] += Math.abs(temp);
         }
      }

      // Сортировка пузырьком массива услов
      for (int c = 1; c < m; c++) {
         // Добавление проверки, отсортирован ли уже массив
         boolean sorted = true;
         for (int j = 1; j <= m - c; j++) {
            // Нужно ли менять на данном шаге элементы массива местами
            boolean chan = false;
            // Если максимальные элементы равны
            if (sortarr[j - 1][0] == sortarr[j][0]) {
               //Если минимальные элементы равны сравнивать по сумме квадратов элементов столбца
               if (sortarr[j - 1][1] == sortarr[j][1])
                  chan = sortarr[j - 1][2] > sortarr[j][2];
               else // Нужно менять элементы местами, если их минимальные элементы стоят по возрастанию
                  chan = sortarr[j - 1][1] < sortarr[j][1];
            } else // Нужно менять элементы местами, если их максимальные элементы стоят по возрастанию
               chan = sortarr[j - 1][0] < sortarr[j][0];
            // Поменять местами два элемента массива если это необходимо
            if (chan) {
               int[] temp = sortarr[j-1];
               sortarr[j-1] = sortarr[j];
               sortarr[j] = temp;
               // Это означает, что массив ещё может быть не отсортированным
               sorted = false;
            }
         }
         // Если массив отсортирован можно остановить сортировку
         if (sorted) break;
      }

      // Создание отсортированного изначального массива
      int[][] nwarr = new int[n][m];
      for (int j = 0; j < m; j++) {
         for (int i = 0; i < n; i++) {
            // Проходимся по всем элементам массива
            // и ставим на их места элементы из соответствующих уже отсортированных столбцов
            nwarr[i][j] = arr[i][sortarr[j][3]];
         }
      }

      // Вывод минимальной суммы всех элементов строки и её номер
      out.println("Минимальная сумма элементов строки: " + minst[0] + "\nНомер этой строки: " + (minst[1]+1));
      // Переменная сдвига, используемая для вывода массива в виде треугольника
      int shift = 1;
      for (int i = 0; i < n*m; i++){
         // Если i является квадратом переменной shift - перенос строки и прибавление 1 к переменной shift
         if (i == shift*shift){
            out.println();
            shift++;
         }
         // Вывод элемента массива отсортированного списка
         out.print(nwarr[i / m][i%m] + " ");
      }
      // Вычисление среднего арифметического
      average = average / n;
      // Вывод разницы между максимальной и минимальной суммы элементов строк и среднего арифметического сумм строк
      out.println("\nРазница между максимальной и минимальной суммой строк: " + (maxsum - minst[0]));
      out.println("Среднее арифметическое сумм строк: " + average);
      // Переменная для стандартного отклонения сумм строк
      double deviat = 0;
      for (int i = 0; i < n; i++){
         // Вычисление стандартного отклонения сумм строк
         deviat += (sumarr[i] - average)*(sumarr[i] - average);
      }
      // Вывод стандартного отклонения сумм строк
      out.print("Стандартное отклонение сумм строк: " + Math.sqrt(deviat/(n-1)));
   }
}
```

### 6. Анализ правильности решения

Программа работает корректно на всем множестве решений с учетом ограничений.

1. Тест при случае, когда максимальные элементы столбцов различны:

    - **Input**:
        ```
        3 3
        1 2 3
        4 5 6
        7 8 9
        ```

    - **Output**:
        ```
        Минимальная сумма элементов строки: 6
        Номер этой строки: 1
        3
        2 1 6
        5 4 9 8 7
        Разница между максимальной и минимальной суммой строк: 18
        Среднее арифметическое сумм строк: 15.0
        Стандартное отклонение сумм строк: 9.0
        ```

2. Тест при одинаковых максимальных и при одинаковых минимальных элементах:

    - **Input**:
        ```
        3 4
      1 1 2 3
      2 3 4 4
      5 5 5 6
        ```

    - **Output**:
        ```
        Минимальная сумма элементов строки: 7
        Номер этой строки: 1
        3
        2 1 1
        4 4 2 3 6
        5 5 5
        Разница между максимальной и минимальной суммой строк: 14
        Среднее арифметическое сумм строк: 13.666666666666666
        Стандартное отклонение сумм строк: 7.023769168568492
        ```

3. Тест при отрицательных элементах массива:

    - **Input**:
        ```
        4 3
        -1 -1 -4
        2 3 5
        4 4 4
        9 9 6
        ```

    - **Output**:
        ```
        Минимальная сумма элементов строки: -6
      Номер этой строки: 1
      -1
      -1 -4 2
      3 5 4 4 4
      9 9 6
      Разница между максимальной и минимальной суммой строк: 30
      Среднее арифметическое сумм строк: 10.0
      Стандартное отклонение сумм строк: 12.328828005937952
        ```

4. Тест когда минимальная сумма строки не в первой строке:

    - **Input**:
        ```
        3 3
        4 4 4
        1 1 2
        5 6 6
        ```

    - **Output**:
        ```
        Минимальная сумма элементов строки: 4
      Номер этой строки: 2
      4
      4 4 2
      1 1 6 6 5
      Разница между максимальной и минимальной суммой строк: 13
      Среднее арифметическое сумм строк: 11.0
      Стандартное отклонение сумм строк: 6.557438524302
        ```

5. Тест на ограничение задачи:

    - **Input**:
        ```
        2 2
      -1000000000 -100000
      1000000000 1000000000
        ```

    - **Output**:
        ```
        Минимальная сумма элементов строки: -1000100000
      Номер этой строки: 1
      -100000
      -1000000000 1000000000 1000000000
      Разница между максимальной и минимальной суммой строк: 3000100000
      Среднее арифметическое сумм строк: 4.9995E8
      Стандартное отклонение сумм строк: 2.1213910542377613E9
        ```
